<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <link rel="stylesheet" type="text/css" href="../../../../css/css.css">
      <script src="../../../../jquery-3.2.1.min.js"></script>
      <script src="getConfig.js"></script>
	  <script src="../../../../js/getMainConfig.js"></script>
      <script src="../../../../js/aikatauluhsl.js"></script>
      <script src="../../../../js/time.js"></script>
      <script src="../../../../js/liikennointi.js"></script>
      <script type="text/javascript" src="../../../../js/jquery.leanModal.min.js"></script>
   </head>
   <body onload="startTime()">
      <div id="parentdiv">
         <div>
            <center>
               <div id="time"></div>
            </center>
         </div>
         <div class="notices">
            <marquee behavior="scroll" direction="left">
               <p id="incl"></p>
            </marquee>
         </div>
         <div class="map" id="map">
            <!-- Google maps tulee tähän -->
         </div>
         <div id="chili">
            <div id="AikaTaulu">
               <script>
                  liikennointi();
                  setInterval(function(){liikennointi()},900000);
               </script>
               <p id="kulku"></p>
            </div>
            <div id="HSLroutes" class="sidebyside">
                <center><img id="hsl_logo" src="../../../../img/hsl.png"></center>
               <div id="teksti">
                  <div class="keskitys">
                     <center><h4 id="otsikko_hsl" style="margin-bottom:0;margin-top: 3em;">&nbsp;&nbsp;&nbsp;<p id="HSLStopname1">Dipoli</p></h4></center>
                        <div class="hsl123" id="hsl_bussit" >
                          <!-- <ul class="sidebyside"></ul>-->
                        </div>
                       <!-- <div class="hsl123">
                           <ul id="hsl_kohde" class="sidebyside"></ul>
                        </div>
                        <div id="aika_taulu" class="hsl123"><ul id="hsl_aikataulu" class="sidebyside"</ul></div>-->
                     </div>
                     <div class="keskitys">
                        <center><h4 style="margin-bottom:0; margin-top:0">&nbsp;&nbsp;&nbsp;<p id="HSLStopname2">Otakallio</p></h4></center>
                        <div class="hsl123" id="hsl_bussit2">
                           <!--<ul   class="sidebyside"></ul>-->
                        </div>
                        <!--<div class="hsl123">
                           <ul id="hsl_kohde2"  class="sidebyside"></ul>
                        </div>
                        <div id="aika_taulu2" class="hsl123"><ul id="hsl_aikataulu2" class="sidebyside"</ul></div>
                 --> </div>
               </div>
            </div>
            <div id="mainos">
               <center><img id="mainosLogo" width="275em" src="../../../../img/sohjoa.png"></center>
               <!-- Mahdolliset mainokset -->
            </div>
         </div>
      </div>
      <div id="buttonZoom">
         <button id="resize"> <i class="fa fa-plus-circle" aria-hidden="true"></i> </button><br>
         <a id="go" href="#infoText">
            <button id="info"><i class="fa fa-info-circle" aria-hidden="true"></i></button>
         </a>
      </div>
      <div id="infoText">
         <h1>Sohjoa projekti</h1>
         <p id="info_fi">test</p>
         <p id="info_se"></p>
         <p id="info_gb" ></p>
      </div>
      <script>
         $("#go").leanModal(); //launches info modal on click 
            
         function muutakoko(){ //change map size to larger and hide other elements on page
                    var kartta = document.getElementById("map");
                    var chili = document.getElementById("chili")
                    var value = $(this).html();
                    if(value != '<i class="fa fa-minus-circle" aria-hidden="true"></i>'){
                        $(this).html('<i class="fa fa-minus-circle" aria-hidden="true"></i>');
                        $(kartta).toggleClass('fullscreen map');
                        $(chili).addClass('katoa');
						var pressed = 1;
                        initMap(pressed);
                        return false;
                    }else{
                        $(this).html('<i class="fa fa-plus-circle" aria-hidden="true"></i>');
                        $(kartta).toggleClass('map fullscreen');
                        $(chili).removeClass('katoa');
                        initMap();
                    }
         }
         
         
         
         $('#resize').click(muutakoko);
         
         //Keyboard variables
         var pressed = 0;
		 var mapOpen = 0;
		 var clearing;
         var infoVisible = 0;
         //Keyboard functions
         document.addEventListener('keydown', function(event) {
            if(event.keyCode == 37 && pressed == 0 && infoVisible == 1) {
				clearTimeout(clearing);
				console.log("cleared clearScreen")
				pressed = 1;
				infoVisible = 0;
				$("#lean_overlay").trigger("click");
				console.log("vasen");
				$('#resize').each(muutakoko);
				mapOpen = 1;
				clearing = setTimeout(clearScreen,15000);
				setTimeout(clearPress, 2000);
            } else if (event.keyCode == 37 && pressed == 0) {
				clearTimeout(clearing);
				console.log("cleared clearScreen")
				pressed = 1;	
				console.log("vasen");
				$('#resize').each(muutakoko);
				mapOpen = 1;
				clearing = setTimeout(clearScreen,15000);
				setTimeout(clearPress, 2000);
			}
			
			if (event.keyCode == 39 && pressed == 0 && mapOpen == 1) {
				clearTimeout(clearing);
				console.log("cleared clearScreen")
				pressed = 1;
				mapOpen = 0;
				$('#resize').each(muutakoko);
				console.log("oikea");
				if (infoVisible == 0){
					$("#go").click();
					infoVisible = 1;
					clearing = setTimeout(clearScreen,15000);
				} else {
					$("#lean_overlay").trigger("click");
					infoVisible = 0;
				}
				setTimeout(clearPress, 2000);
			} else if (event.keyCode == 39 && pressed == 0) {
				clearTimeout(clearing);
				console.log("cleared clearScreen")
				pressed = 1;
				console.log("oikea");
				if (infoVisible == 0){
					$("#go").click();
					infoVisible = 1;
					clearing = setTimeout(clearScreen,15000);
				} else {
					$("#lean_overlay").trigger("click");
					infoVisible = 0;
				}
				setTimeout(clearPress, 2000);
			}
         //Keyboard functions
         function clearPress(){
         	pressed = 0;
         }
		 
		 function clearScreen(){
			console.log("clearscreen");			
			if (mapOpen == 1){
				mapOpen = 0;
				$('#resize').each(muutakoko);
			} else {
				$("#lean_overlay").trigger("click");
				infoVisible = 0;
			}
		 }
         });
		 
		 setTimeout(function(){
			location.reload();
		 }, 86400000);
         
      </script>
	  <script src="../../../../js/info.js"></script>
      <script src="../../../../js/map.js"></script>
      <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBTdnp378Eb1qxZRQrYJcT7jIoyJlLxZvE&callback=initMap"></script>
      <link rel="stylesheet" type="text/css" href="../../../../css/font-awesome.min.css">
	  <script src="../../../../js/hakufunktiot.js"></script>
   </body>
</html>